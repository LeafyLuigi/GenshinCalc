{
	"title": "JSON Schema for GenshinCalc's localStorage JSON items.",
	"$schema": "http://json-schema.org/draft-04/schema#",
	"type": "object",
	"definitions": {
		"objectID": {
			"description": "An ID generated by a function somewhere. Must be globally unique.",
			"type": "string"
		},
		"objectName": {
			"description": "The name of something. It could be a Character, a Weapon or something else.",
			"type": "string"
		},
		"useTravElement": {
			"description": "Traveler only, obviously. The element number the Traveler is aligned to. Maximum varies on what's implemented into the game. Unaligned is 0 with ascending numbers being the Element going by region.",
			"minimum": 0,
			"type": "integer"
		},
		"talents": {
			"description": "An array of integers for the talents in the order \"Normal Attack\", \"Skill\", \"Burst\". The values ignore any bonuses from Constellations.",
			"type": "array",
			"minItems": 3,
			"maxItems": 3,
			"items": {
				"type": "integer",
				"minimum": 1,
				"maximum": 10
			}
		},
		"usedIn": {
			"description": "What sets the weapon/artifact is used in. Items are sorted by character.",
			"type": "object",
			"patternProperties": {
				"^([^\"'$]+)$": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/objectID"
					}
				}
			}
		},
		"artifactObject": {
			"description": "An artifact.",
			"type": "object",
			"properties": {
				"id": {
					"$ref": "#/definitions/objectID"
				},
				"rarity": {
					"description": "The rarity of the artifact. Min and Max values are determined by artifact set.",
					"type": "integer"
				},
				"mainStat": {
					"$ref": "#/definitions/valid/artifactMainStat"
				},
				"substats": {
					"$ref": "#/definitions/valid/artifactSubstats"
				},
				"usedIn": {
					"$ref": "#/definitions/usedIn"
				}
			}
		},
		"characterCon": {
			"description": "The constellation value of the character. Do not use for characters without constellations.",
			"type": "integer",
			"minimum": 0,
			"maximum": 6
		},
		"charExp": {
			"type": "integer",
			"minimum": 0,
			"maximum": 8362650
		},
		"note": {
			"description": "A note.",
			"type": "string"
		},

		"valid": {
			"artifactTypes": {
				"enum": ["flower", "plume", "sands", "goblet", "circlet"]
			},
			"artifactMainStat": {
				"description": "The allowed main stat varies on artifact type. These are sorted by artifact type in the order in #/definitions/artifactTypes.",
				"oneOf": [
					{"enum":["HP"]},
					{"enum":["ATK"]},
					{"enum":["HP%","ATK%","DEF%","EM","ER"]},
					{"enum":["HP%","ATK%","DEF%","EM","Pyro","Hydro","Electro","Cryo","Dendro","Anemo","Geo","Physical"]},
					{"enum":["HP%","ATK%","DEF%","EM","CR","CD","HB"]}
				]
			},
			"artifactSubstats": {
				"description": "The substats on the artifact. Allowed substats must not match the main stat.",
				"type": "object",
				"patternProperties": {
					"^(HP|ATK|DEF|HP%|ATK%|DEF%|EM|ER|CR|CD)$": {
						"description": "An individual substat. Value is what the substat is, sans %.",
						"type": "number",
						"minimum": 0,
						"exclusiveMinimum": true
					}
				}
			},

			"weaponTypes": {
				"enum": ["Bow", "Catalyst", "Claymore", "Polearm", "Sword"]
			},
			"regions": {
				"enum": ["Mondstadt", "Liyue", "Inazuma", "Sumeru", "Fontaine", "Natlan", "Snezhnaya", "Khaenri'ah"]
			},
			"elementalTypes": {
				"enum": ["Pyro", "Hydro", "Electro", "Cryo", "Dendro", "Anemo", "Geo", "Unaligned"]
			},
			"talentBonusAtConLevel": {
				"type": "integer",
				"enum": [3, 5]
			}
		}
	},
	"properties": {
		"ids": {
			"description": "[localStorage] An object that contains the IDs of things that use IDs.",
			"type": "object",
			"properties": {
				"$character": {
					"description": "Key: Character name. An elementally aligned Traveler (including Unaligned) uses Traveler#.\nValue: 'char'.",
					"enum": ["char"]
				},
				"$party": {
					"description": "Key: Party ID.\nValue: 'party'.",
					"enum": ["party"]
				},
				"$characterEquipmentSet": {
					"description": "Key: Set ID.\nValue: 'set--' + character's name. Elementally aligned Travelers do not use this.",
					"type": "string"
				},
				"$weapon": {
					"description": "Key: Weapon ID.\nValue: 'weap--' + weapon name (not title).",
					"type": "string"
				},
				"$artifact": {
					"description": "Key: Artifact ID.\nValue: Depends on if the set contains a single type or not.\nFor those that do the value is 'arti--' + set name.\nFor those that don't the value is 'arti--' + set name + kind of artifact.",
					"type": "string"
				}
			}
		},
		"selectedChars": {
			"description": "An array of selected characters and weapons for material requirement calculation.",
			"type": "array",
			"items": [{
				"description": "A selected character or weapon.",
				"oneOf": [{
					"description": "A weapon. Determined by the item having an ID.",
					"type": "object",
					"properties": {
						"id": {
							"$ref": "#/definitions/objectID"
						},
						"name": {
							"$ref": "#/definitions/objectName"
						},
						"targetExp": {
							"description": "The targeted EXP. Maximum is determined by rarity.",
							"type": "integer",
							"minimum": 0
						},
						"ascension": {
							"description": "The targeted ascension. Maximum is determined by rarity.",
							"type": "integer",
							"minimum": 0
						}
					},
					"required": ["id", "name", "targetExp", "ascension"]
				}, {
					"description": "Elementally aligned Traveler but not first Traveler in list. Determined by only having 'useTravElement'.",
					"type": "object",
					"properties": {
						"useTravElement": {
							"$ref": "#/definitions/useTravElement"
						}
					},
					"additionalProperties": false,
					"required": ["useTravElement"]
				}, {
					"description": "A character. Essentially the fallback when calculating the required items.",
					"type": "object",
					"properties": {
						"name": {
							"$ref": "#/definitions/objectName"
						},
						"targetTalents": {
							"$ref": "#/definitions/talents"
						},
						"ascension": {
							"description": "The targeted ascension.",
							"type": "integer",
							"minimum": 0,
							"maximum": 6
						},
						"targetExp": {
							"description": "The targeted EXP.",
							"$ref": "#/definitions/charExp"
						},
						"byElement": {
							"description": "Traveler only. Use in place of targetTalents. Contains list of targetTalents for the applicable elementally aligned type.",
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"targetTalents": {
										"$ref": "#/definitions/talents"
									}
								}
							}
						},
						"useTravElement": {
							"$ref": "#/definitions/useTravElement"
						}
					},
					"required": ["name", "ascension", "targetExp"]
				}]
			}]
		},
		"$weapon": {
			"description": "One of the many weapons in the game, ie 'Dull Blade', to be stored within localStorage.",
			"type": "array",
			"items": {
				"description": "An individual weapon.",
				"type": "object",
				"properties": {
					"id": {
						"$ref": "#/definitions/objectID"
					},
					"usedIn": {
						"$ref": "#/definitions/usedIn"
					},
					"exp": {
						"description": "How much exp the weapon has. Maximum varies by rarity.",
						"type": "integer",
						"minimum": 0,
						"default": 0
					},
					"ascension": {
						"description": "The ascension of the weapon. Maximum varies by rarity.",
						"type": "integer",
						"minimum": 0,
						"default": 0
					},
					"refinement": {
						"description": "What refinement the weapon is. Does not exist for rarities less than or equal to 2 or weapons that cannot be refined.",
						"type": "integer",
						"maximum": 5,
						"minimum": 1,
						"default": 1
					}
				},
				"required": ["id"]
			}
		},
		"$artifactSet": {
			"description": "How this works varies on if the set only contains one artifact type.",
			"oneOf": [{
				"description": "For those with only one artifact type.",
				"type": "array",
				"items": {
					"$ref": "#/definitions/artifactObject"
				}
			},{
				"description": "For those with multiple artifact types.",
				"type": "object",
				"patternProperties": {
					"^(flower|plume|sands|goblet|circlet)$": {
						"description": "This is sorted by type of artifact.",
						"type": "array",
						"items": {
							"$ref": "#/definitions/artifactObject"
						}
					}
				}
			}]
		},
		"$character": {
			"description": "A character in localStorage.",
			"type": "object",
			"properties": {
				"nickname": {
					"description": "For characters that can be renamed. Default is the character's name.",
					"type": "string"
				},
				"con": {
					"$ref": "#/definitions/characterCon"
				},
				"talents": {
					"$ref": "#/definitions/talents"
				},
				"owned": {
					"description": "Bool for if the character is owned or not.",
					"type": "boolean"
				},
				"hideInfo": {
					"description": "Bool whether to hide info on the characters page.",
					"type": "boolean"
				},
				"exp": {
					"description": "How much EXP the character has.",
					"$ref": "#/definitions/charExp"
				},
				"note": {
					"$ref": "#/definitions/note"
				}
			}
		},
		"inv": {
			"description": "The inventory.",
			"type": "object",
			"patternProperties": {
				"^([^\"'$]+)$": {
					"description": "An item.",
					"type": "integer",
					"minimum": 0
				}
			}
		},


		"rarity": {
			"description": "The character's rarity. Affects background and star count.",
			"type": "integer",
			"maximum": 5,
			"minimum": 4
		},
		"weapon": {
			"description": "The kind of weapon the character uses. Affects what can be attached to the character and the weapon icon. Use null for unknown.",
			"oneOf": [{
				"$ref": "#/definitions/valid/weaponTypes"
			}, {
				"type": "null"
			}]
		},
		"region": {
			"description": "Where the character originates from. Use null for no region. Affects vision icon.",
			"oneOf": [{
					"$ref": "#/definitions/valid/regions"
				},
				{
					"type": "null"
				}
			]
		},
		"type": {
			"description": "The elemental alignment of the character. Affects vision icon. Use null for Traveler.",
			"oneOf": [{
					"$ref": "#/definitions/valid/elementalTypes"
				},
				{
					"type": "null"
				}
			]
		},
		"gem": {
			"description": "The 'gem' item group used for ascension. Check items for what items can be used.",
			"type": "string"
		},
		"boss": {
			"description": "The 'boss' item used for ascension. Check items for what items can be used.",
			"oneOf": [{
					"type": "string"
				},
				{
					"type": "null"
				}
			]
		},
		"local": {
			"description": "The 'local' item used for ascension. Check items for what items can be used.",
			"type": "string"
		},
		"common": {
			"description": "The 'common' item group used for ascension and talents. Check items for what items can be used.",
			"type": "string"
		},
		"books": {
			"description": "The 'books' item group(s) used for talents. Use an array for multiple kinds used, mainly for the Traveler. Use null if character isn't yet implemented or item is unknown. Check items for what items can be used.",
			"oneOf": [{
				"type": "string"
			}, {
				"type": "array"
			}, {
				"type": "null"
			}]
		},
		"weeklyBoss": {
			"description": "The 'weeklyBoss' item used for ascension. Check items for what items can be used.",
			"type": "string"
		},
		"conBonus": {
			"description": "What character constellation level specific talents get +3 levels to. This needs two items. Use null if unknown.",
			"oneOf": [{
				"type": "object",
				"minItems": 2,
				"maxItems": 2,
				"uniqueItems": true,
				"properties": {
					"1": {
						"description": "Normal Attack",
						"$ref": "#/definitions/valid/talentBonusAtConLevel"
					},
					"2": {
						"description": "Skill (E by default)",
						"$ref": "#/definitions/valid/talentBonusAtConLevel"
					},
					"3": {
						"description": "Burst (Q by default)",
						"$ref": "#/definitions/valid/talentBonusAtConLevel"
					}
				}
			}, {
				"type": "null"
			}, {
				"type": "string"
			}]
		},
		"hasCons": {
			"description": "Bool if the character has cons or not. Set this to false to disable constellation calculation.",
			"type": "boolean"
		},
		"include": {
			"description": "Bool if the character should be included in all pages. Set this to false to ignore the character.",
			"type": "boolean"
		},
		"vision": {
			"description": "Custom Vision for any character. Overrides region+type(+visionType).",
			"type": "string"
		},
		"visionType": {
			"description": "Variation for Visions depending on region. Required for \"Fontaine\", excluding for the Traveler and any characters with visionType.",
			"type": "string"
		},
		"canRename": {
			"description": "Bool if the character can be renamed.",
			"type": "boolean"
		},
		"regions": {
			"description": "What specific stuff is required per region for the Traveler. Do not use this with other characters.",
			"type": "array",
			"items": {
				"type": "object",
				"$ref": "#"
			}
		}
	}
}